# –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö news-analyzer

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö

### 1. –û—Ç—á–µ—Ç—ã –∞–Ω–∞–ª–∏–∑–∞ (JSON —Ñ–∞–π–ª—ã)

**–í–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:**
- –ü—É—Ç—å: `/app/storage/reports/`
- –§–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–æ–≤: `report_YYYY-MM-DD.json`
- –°–æ–¥–µ—Ä–∂–∏–º–æ–µ: JSON –æ—Ç—á–µ—Ç—ã —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –∞–Ω–∞–ª–∏–∑–∞ –Ω–æ–≤–æ—Å—Ç–µ–π

**Docker Volume:**
- –ò–º—è volume: `analyzer_reports`
- –¢–∏–ø: `local` (driver: local)
- –ú–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: `analyzer_reports:/app/storage/reports`

**–§–∏–∑–∏—á–µ—Å–∫–æ–µ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ —Ö–æ—Å—Ç–µ:**
```bash
# Docker —Ö—Ä–∞–Ω–∏—Ç volumes –≤:
/var/lib/docker/volumes/analyzer_reports/_data/
```

**–î–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º:**
```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –æ—Ç—á–µ—Ç–æ–≤ –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker exec -it news-analyzer ls -la storage/reports/

# –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ –æ—Ç—á–µ—Ç–∞
docker exec -it news-analyzer cat storage/reports/report_2025-12-16.json

# –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç—á–µ—Ç–∞ –Ω–∞ —Ö–æ—Å—Ç
docker cp news-analyzer:/app/storage/reports/report_2025-12-16.json ./
```

### 2. –õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

**–í–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:**
- –ü—É—Ç—å: `/app/storage/logs/`
- –§–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–æ–≤: `news_analyzer.log`
- –°–æ–¥–µ—Ä–∂–∏–º–æ–µ: –õ–æ–≥–∏ —Ä–∞–±–æ—Ç—ã –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–∞

**Docker Volume:**
- –ò–º—è volume: `analyzer_logs`
- –¢–∏–ø: `local` (driver: local)
- –ú–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: `analyzer_logs:/app/storage/logs`

**–§–∏–∑–∏—á–µ—Å–∫–æ–µ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ —Ö–æ—Å—Ç–µ:**
```bash
# Docker —Ö—Ä–∞–Ω–∏—Ç volumes –≤:
/var/lib/docker/volumes/analyzer_logs/_data/
```

**–î–æ—Å—Ç—É–ø –∫ –ª–æ–≥–∞–º:**
```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ —á–µ—Ä–µ–∑ docker-compose
make analyzer-logs

# –ò–ª–∏ –Ω–∞–ø—Ä—è–º—É—é
docker-compose logs -f news-analyzer

# –ü—Ä–æ—Å–º–æ—Ç—Ä —Ñ–∞–π–ª–∞ –ª–æ–≥–∞ –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker exec -it news-analyzer tail -f storage/logs/news_analyzer.log
```

### 3. –î–∞–Ω–Ω—ã–µ NLTK (—Å—Ç–æ–ø-—Å–ª–æ–≤–∞, —Ç–æ–∫–µ–Ω–∏–∑–∞—Ç–æ—Ä—ã)

**–í–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:**
- –ü—É—Ç—å: `~/.cache/nltk_data/` (–¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è appuser: `/home/appuser/.cache/nltk_data/`)
- –°–æ–¥–µ—Ä–∂–∏–º–æ–µ: –ó–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ NLTK (stopwords, punkt tokenizer)
- –†–∞–∑–º–µ—Ä: ~50-100 MB

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –î–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ —á–µ—Ä–µ–∑ `setup_nltk.py`
- –•—Ä–∞–Ω—è—Ç—Å—è –≤ –∫—ç—à–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–Ω–µ –≤ volume)
- –ü—Ä–∏ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –¥–∞–Ω–Ω—ã–µ –Ω—É–∂–Ω–æ –∑–∞–≥—Ä—É–∂–∞—Ç—å –∑–∞–Ω–æ–≤–æ

**–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö:**
```bash
# –†—É—á–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö NLTK
docker exec -it news-analyzer python setup_nltk.py
```

### 4. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

**–í–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:**
- –ü—É—Ç—å: `/app/config.yaml`
- –ò—Å—Ç–æ—á–Ω–∏–∫: –ö–æ–ø–∏—Ä—É–µ—Ç—Å—è –∏–∑ `config.yaml.example` –ø—Ä–∏ —Å–±–æ—Ä–∫–µ, –µ—Å–ª–∏ `config.yaml` –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- –°–æ–¥–µ—Ä–∂–∏–º–æ–µ: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–Ω–∞–ª–∏–∑–∞ (–ë–î, –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏–∏, –ø—É—Ç–∏ –∫ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è–º)

**–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
```yaml
# –í docker-compose.yml (–∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–æ):
# - ./news-analyzer-python/config.yaml:/app/config.yaml:ro
```

**–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –±–µ–∑ –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∏:**
1. –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Å—Ç—Ä–æ–∫—É –≤—ã—à–µ –≤ `docker-compose.yml`
2. –°–æ–∑–¥–∞—Ç—å `config.yaml` –Ω–∞ —Ö–æ—Å—Ç–µ
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä

### 5. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

**–ò—Å—Ç–æ—á–Ω–∏–∫:**
- –§–∞–π–ª `.env` –Ω–∞ —Ö–æ—Å—Ç–µ (–Ω–µ –º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä)
- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ `docker-compose.yml`
- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ GitHub Actions secrets

**–°–æ–¥–µ—Ä–∂–∏–º–æ–µ:**
- `POSTGRES_*` - –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î
- `ANALYZER_SCHEDULE_TIMES` - —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞
- `TELEGRAM_SIGNAL_API_KEY` - —Ç–æ–∫–µ–Ω –±–æ—Ç–∞ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –æ—Ç—á–µ—Ç–æ–≤
- `LOG_LEVEL` - —É—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

## üìä –°–≤–æ–¥–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞

| –¢–∏–ø –¥–∞–Ω–Ω—ã—Ö | –ü—É—Ç—å –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ | Docker Volume | –ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å |
|------------|-------------------|--------------|-----------------|
| –û—Ç—á–µ—Ç—ã JSON | `/app/storage/reports/` | `analyzer_reports` | ‚úÖ –î–∞ |
| –õ–æ–≥–∏ | `/app/storage/logs/` | `analyzer_logs` | ‚úÖ –î–∞ |
| –î–∞–Ω–Ω—ã–µ NLTK | `~/.cache/nltk_data/` | ‚ùå –ù–µ—Ç | ‚ùå –ù–µ—Ç (–ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è) |
| –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è | `/app/config.yaml` | ‚ùå –ù–µ—Ç | ‚ùå –ù–µ—Ç (–≤ –æ–±—Ä–∞–∑–µ) |
| –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è | - | ‚ùå –ù–µ—Ç | ‚úÖ –î–∞ (–≤ .env) |

## üîç –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö volumes
```bash
docker volume ls | grep analyzer
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ volume
```bash
docker volume inspect analyzer_reports
docker volume inspect analyzer_logs
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä —Ä–∞–∑–º–µ—Ä–∞ volumes
```bash
docker system df -v | grep analyzer
```

### –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
```bash
# –ë—ç–∫–∞–ø –æ—Ç—á–µ—Ç–æ–≤
docker run --rm -v analyzer_reports:/data -v $(pwd):/backup alpine tar czf /backup/analyzer_reports_backup.tar.gz -C /data .

# –ë—ç–∫–∞–ø –ª–æ–≥–æ–≤
docker run --rm -v analyzer_logs:/data -v $(pwd):/backup alpine tar czf /backup/analyzer_logs_backup.tar.gz -C /data .
```

### –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ –±—ç–∫–∞–ø–∞
```bash
# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç—á–µ—Ç–æ–≤
docker run --rm -v analyzer_reports:/data -v $(pwd):/backup alpine tar xzf /backup/analyzer_reports_backup.tar.gz -C /data

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ª–æ–≥–æ–≤
docker run --rm -v analyzer_logs:/data -v $(pwd):/backup alpine tar xzf /backup/analyzer_logs_backup.tar.gz -C /data
```

### –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö
```bash
# –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö –æ—Ç—á–µ—Ç–æ–≤ (—Å—Ç–∞—Ä—à–µ 30 –¥–Ω–µ–π)
docker exec -it news-analyzer find storage/reports -name "*.json" -mtime +30 -delete

# –û—á–∏—Å—Ç–∫–∞ –ª–æ–≥–æ–≤ (–æ—Å—Ç–∞–≤–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ 100 —Å—Ç—Ä–æ–∫)
docker exec -it news-analyzer tail -n 100 storage/logs/news_analyzer.log > /tmp/log.tmp && \
docker exec -it news-analyzer mv /tmp/log.tmp storage/logs/news_analyzer.log
```

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–î–∞–Ω–Ω—ã–µ NLTK –Ω–µ –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã**: –ü—Ä–∏ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –¥–∞–Ω–Ω—ã–µ NLTK –Ω—É–∂–Ω–æ –∑–∞–≥—Ä—É–∂–∞—Ç—å –∑–∞–Ω–æ–≤–æ. –≠—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ —á–µ—Ä–µ–∑ `setup_nltk.py`.

2. **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤ –æ–±—Ä–∞–∑–µ**: `config.yaml` –∫–æ–ø–∏—Ä—É–µ—Ç—Å—è –≤ –æ–±—Ä–∞–∑ –ø—Ä–∏ —Å–±–æ—Ä–∫–µ. –î–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –±–µ–∑ –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∏ –Ω—É–∂–Ω–æ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª –∫–∞–∫ volume.

3. **–†–∞–∑–º–µ—Ä volumes**: –û—Ç—á–µ—Ç—ã –∏ –ª–æ–≥–∏ –º–æ–≥—É—Ç –∑–∞–Ω–∏–º–∞—Ç—å –º–µ—Å—Ç–æ. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –æ—á–∏—â–∞—Ç—å —Å—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ.

4. **–ë—ç–∫–∞–ø—ã**: –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Ä–µ–≥—É–ª—è—Ä–Ω–æ –¥–µ–ª–∞—Ç—å –±—ç–∫–∞–ø—ã volumes —Å –æ—Ç—á–µ—Ç–∞–º–∏, —Ç–∞–∫ –∫–∞–∫ –æ–Ω–∏ —Å–æ–¥–µ—Ä–∂–∞—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞.

5. **–î–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º**: –í—Å–µ –¥–∞–Ω–Ω—ã–µ –¥–æ—Å—Ç—É–ø–Ω—ã —á–µ—Ä–µ–∑ Docker volumes, —á—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –ø—Ä–∏ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤.
